---
title: 图像处理笔记
tags: 算法
categories: 学习笔记
date: 2019-07-27 21:42:00
---

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://wujilingfeng.top/MathJax/MathJax.js?config=TeX-AMS_CHTML">
</script>
图像处理笔记

<!--more-->

#### opencv

读取并显示一张图片

```python
import cv2 as cv
src=cv.imread('E:\imageload\example.png')       
cv.namedWindow('input_image', cv.WINDOW_AUTOSIZE)#若这里的窗口名与下面不一致会多一个窗口
cv.imshow('input_image', src)
cv.waitKey(0)
cv.destroyAllWindows()
```

这与matplotlib.img显示图片所用函数大概是一样的

| 函数名                     | 参数意义                             | 备注 |
| -------------------------- | ------------------------------------ | ---- |
| cv.imread("",-1\|\|0\|\|1) | -1代表自动，0代表灰度，1代表三个通道 |      |
|                            |                                      |      |
|                            |                                      |      |
|                            |                                      |      |
|                            |                                      |      |
|                            |                                      |      |
|                            |                                      |      |
|                            |                                      |      |
|                            |                                      |      |

对数变化，对每个像素点的值v,$v\to v^\gamma$

##### 直方图均衡化

我们想要一个映射$v\to f(v)$,v是像素值，f(v)也是像素值，
* 它是保测度的(测度是这个像素值上的像素数目,用h(v)表示)，
* 我们还要求$\overline{h}\left(f\left(v\right)\right)==\frac{num\_p}{max\_v}$,  ($\overline(h())$是f(v)上的测度，num_p是像素总数，max_v是像素值的最大值)

那么这两个条件可以写成
$\int_{0}^{v}h\left(v\right)dv=\int_{0}^{f\left(v\right)}\overline{h}\left(f\left(v\right)\right)df\left(v\right)$
$\sum h\left(v_i\right)=\frac{num\\_p}{max\\_v}*f\left(v\right)$

得到

$f\left(v\right)=\frac{max\_v}{num\_p}\sum h\left(v_i\right)$

##### 单应阵

对于三维空间两个坐标系，他们的关系是

$$\begin{matrix}
u\\\\
v\\\\
w\\\\
1
\end{matrix}=\left(\begin{matrix}
R&t\\\\
0&1
\end{matrix}\right)\begin{matrix}
x\\\\
y\\\\
z\\\\
1
\end{matrix}$$
我们只考察xy平面的点到uvw的点（也就是限制z=0，然后剔掉这变量），

$$\left(\begin{matrix}
u\\\\
v\\\\
w\\\\
1
\end{matrix}\right)=\left(\begin{matrix}
r_1&r_2&t\\\\
0&0&1
\end{matrix}\right)\begin{matrix}
x\\\\
y\\\\
1
\end{matrix}$$
然后相机投影矩阵(小孔成像)是$$\frac{1}{w}\left(\begin{matrix}
s&0&0&0\\\\
0&s&0&0\\\\
0&0&s&0
\end{matrix}\right)*\left(\begin{matrix}u\\\\
v\\\\
w\\\\
1
\end{matrix}\right)$$
那么从xy平面到图像平面的矩阵H=$$\begin{matrix}
h_{11}&h_{12}&h_{13}\\\\
h_{21}&h_{22}&h_{23}\\\\
h_{31}&h_{32}&h_{33}
\end{matrix}$$
更广义的从图像平面到xy平面（世界坐标系）的变换矩阵是将H中1换成$h_{33}$,
更广义的从一幅图像到另一图像的变换矩阵也是H的形式。

#### opencv函数
| 函数名             | 解释                  |
| ------------------ | --------------------- |
| cv2.Rodrigues(vec) | vec的模长表示旋转弧度 |




