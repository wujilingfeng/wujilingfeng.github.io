---
title: vim使用和配置
date: 2019-01-31 16:28:26
tags: [编程, 工具]
categories: 计算机
---

本文介绍vim的使用及配置。有人将vim分为输入模式，命令模式，底线模式。工程用语冗余，模糊，自叨自扰。应该分为输入模式，命令模式即可。如果换一种角度看，也可以直接看成一种模式。

---

<!--more-->

#### vim的使用

[这里](http://www.runoob.com/linux/linux-vim.html)有较好的介绍。

---

``` bash
!#暂时跳到shell中
i#进入输模式（前入）
a#进入输入模式（后入）
ctr + c#退出输入模式
：wq#保存并退出
v#之后再移动光标，选择
d#删除所选内容
y#复制所选内容
nG#移动到n行
G#移动到最后一行
gg#移动到第一行
/word#搜索word，从光标处开始
n#搜索下一个（next的缩写）
u#撤销对文件的修改
p#粘贴
dd#删除所在行
yy#复制所在行
ctr + $#行尾
ctr + ^#行首
:1,$s/word1/word2/gc#全文替换world1为world2
批量注释：
Ctrl + v 进入块选择模式，然后移动光标选中你要注释的行，再按大写的 I 进入行首插入模式输入注释符号如 // 或 #，输入完毕之后，按两下 ESC，Vim 会自动将你选中的所有行首都加上注释，保存退出完成注释。
取消注释：
Ctrl + v 进入块选择模式，选中你要删除的行首的注释符号，注意 // 要选中两个，选好之后按 d 即可删除注释，ESC 保存退出。
:%!xxd#16进制显示

```

vim的剪切板(寄存器)与系统不共用。在外部复制内容时不能复制到vim中。

需要安装vim图形ui

``` bash
sudo apt install vim-gnome
```

配置~/.vimrc

```
set clipboard=unnamedplus
```



#### vim的配置

---

```
set clipboard=unnamedplus
set nu
set encoding=utf-8
syntax enable
syntax on
filetype on
set autoindent
set cindent
set tabstop=4
set softtabstop=4
set shiftwidth=4
set cursorline
set expandtab
colorscheme desert
func! Loadcsf()
    if filereadable("cscope.out")
        cs add cscope.out
" else add database pointed to by environment
    else
        let targetfile=findfile("cscope.out",".;")
        let targetpath=matchstr(targetfile,".*/")
        if !empty(targetfile)&&filereadable(targetfile)
            exe "cs add" targetfile targetpath
        endif
    endif

endfunc

if has("cscope")
    "set csprg=/usr/local/bin/cscope
    set csto=0
    set cst
    set nocsverb
    exec "call Loadcsf()"
" add any database in current directory
    set csverb
endif
inoremap ( ()<ESC>i
inoremap [ []<ESC>i
inoremap { {}<ESC>i
inoremap ' ''<ESC>i
inoremap " ""<ESC>i
inoremap $ $$<ESC>i
nmap <leader>s :cs find s <C-R>=expand("<cword>")<CR><CR>
nmap <leader>g :cs find g <C-R>=expand("<cword>")<CR><CR>
nmap <leader>c :cs find c <C-R>=expand("<cword>")<CR><CR>
nmap <leader>t :cs find t <C-R>=expand("<cword>")<CR><CR>
nmap <leader>e :cs find e <C-R>=expand("<cword>")<CR><CR>
nmap <leader>f :cs find f <C-R>=expand("<cfile>")<CR><CR>
nmap <leader>i :cs find i <C-R>=expand("<cfile>")<CR><CR>
nmap <leader>d :cs find d <C-R>=expand("<cword>")<CR><CR>
map <F5> :call CompileCode()<CR>
vmap <F5> :call CompileCode()<CR>
func! Compilelatex()
    exec "!xelatex %"
    exec "!evince %<.pdf "
endfunc
func! Compilegpp()
    exec "cs kill 0"
    exec "!cd ../&&bash cscope.sh&&make&&./bin/$(basename `pwd`)"
    exec "call Loadcsf()"
endfunc
func! Compilepy()
    exec "!python3 %"
endfunc
func! CompileCode()
        exec "w"
	if &filetype == "tex"
	      exec "call Compilelatex()"
	elseif &filetype == "cpp"
	      exec "call Compilegpp()"
	elseif &filetype == "c"
	      exec "call Compilegpp()"
	elseif &filetype == "python"
	      exec "call Compilepy()"
	endif
endfunc

```

#### cscope使用

`cs -h`查看帮助，在vim中使用`:cs find g name`